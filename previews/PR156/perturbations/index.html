<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Perturbations · PowerSimulationsDynamics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="PowerSimulationsDynamics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PowerSimulationsDynamics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome Page</a></li><li><a class="tocitem" href="../quick_start_guide/">Quick Start Guide</a></li><li><a class="tocitem" href="../simulation/">Simulation</a></li><li><a class="tocitem" href="../execute/">Simulation Execution</a></li><li><a class="tocitem" href="../tutorials_page/">Tutorials</a></li><li><a class="tocitem" href="../models/">Models</a></li><li><a class="tocitem" href="../initialization/">Initialization</a></li><li><a class="tocitem" href="../small/">Small Signal</a></li><li><a class="tocitem" href="../reference_frames/">Reference Frames</a></li><li class="is-active"><a class="tocitem" href>Perturbations</a><ul class="internal"><li><a class="tocitem" href="#NetworkSwitch"><span>NetworkSwitch</span></a></li><li><a class="tocitem" href="#BranchTrip"><span>BranchTrip</span></a></li><li><a class="tocitem" href="#GeneratorTrip"><span>GeneratorTrip</span></a></li><li><a class="tocitem" href="#ControlReferenceChange"><span>ControlReferenceChange</span></a></li><li><a class="tocitem" href="#LoadChange"><span>LoadChange</span></a></li><li><a class="tocitem" href="#LoadTrip"><span>LoadTrip</span></a></li><li><a class="tocitem" href="#SourceBusVoltageChange"><span>SourceBusVoltageChange</span></a></li></ul></li><li><a class="tocitem" href="../generic/">Renewable Models</a></li><li><span class="tocitem">Generator Component Library</span><ul><li><a class="tocitem" href="../component_models/machines/">Machine</a></li><li><a class="tocitem" href="../component_models/shafts/">Shaft</a></li><li><a class="tocitem" href="../component_models/avr/">AVR</a></li><li><a class="tocitem" href="../component_models/pss/">PSS</a></li><li><a class="tocitem" href="../component_models/turbine_gov/">Turbine and Governor</a></li></ul></li><li><span class="tocitem">CIG Component Library</span><ul><li><a class="tocitem" href="../component_models/converter/">Converter</a></li><li><a class="tocitem" href="../component_models/dc_source/">DC Sources</a></li><li><a class="tocitem" href="../component_models/filters/">Filter</a></li><li><a class="tocitem" href="../component_models/freq_esti/">Frequency Estimators</a></li><li><a class="tocitem" href="../component_models/inner_control/">Inner Control</a></li><li><a class="tocitem" href="../component_models/outer_control/">Outer Control</a></li></ul></li><li><span class="tocitem">Branch Models</span><ul><li><a class="tocitem" href="../component_models/network/">Network</a></li></ul></li><li><span class="tocitem">Code Base Developer Guide</span><ul><li><a class="tocitem" href="../code_base_developer_guide/developer/">Developer Guide</a></li></ul></li><li><a class="tocitem" href="../api/public/">Public API Reference</a></li><li><a class="tocitem" href="../api/internal/">Internal API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Perturbations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Perturbations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL-SIIP/PowerSimulationsDynamics.jl/blob/master/docs/src/perturbations.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Perturbations"><a class="docs-heading-anchor" href="#Perturbations">Perturbations</a><a id="Perturbations-1"></a><a class="docs-heading-anchor-permalink" href="#Perturbations" title="Permalink"></a></h1><p>Perturbations are used to alter the system from its steady state operation. If a Simulation is properly initialized, all states will remain fixed in their initial condition if no perturbation is applied to the system. The list of perturbations is as follows:</p><h2 id="NetworkSwitch"><a class="docs-heading-anchor" href="#NetworkSwitch">NetworkSwitch</a><a id="NetworkSwitch-1"></a><a class="docs-heading-anchor-permalink" href="#NetworkSwitch" title="Permalink"></a></h2><p>A <code>NetworkSwitch</code> allows to modify directly the admittance matrix, <code>Ybus</code>, used in the Simulation. This allows the user to perform branch modifications, three phase faults (with impedance larger than zero) or branch trips, as long as the new <code>Ybus</code> provided captures that perturbation.</p><p>The constructor is given by:</p><pre><code class="language-julia hljs">mutable struct NetworkSwitch &lt;: Perturbations
    time::Float64
    ybus::SparseArrays.SparseMatrixCSC{Complex{Float64}, Int}
end</code></pre><p>The <code>time</code> defines when the Network Switch will happen. This time should be inside the time span considered in the Simulation. <code>ybus</code> provides the new Ybus.</p><h3 id="Example-1:-Circuit-Disconnection"><a class="docs-heading-anchor" href="#Example-1:-Circuit-Disconnection">Example 1: Circuit Disconnection</a><a id="Example-1:-Circuit-Disconnection-1"></a><a class="docs-heading-anchor-permalink" href="#Example-1:-Circuit-Disconnection" title="Permalink"></a></h3><p>Consider a two bus system connected via a double circuit line, on which each circuit has parameters, <code>r = 0.0, x = 0.1, b = 0.0</code> per unit, then the admittance matrix of the original system is given by:</p><pre><code class="language-julia hljs">yb = [0.0 - 20.0im 0.0 + 20.0im
      0.0 + 20.0im 0.0 - 20.0im]</code></pre><p>Triping one circuit can be modeled by doubling the impedance, i.e., dividing by 2 the admittance:</p><pre><code class="language-julia hljs">new_yb = [0.0 - 10.0im 0.0 + 10.0im
          0.0 + 10.0im 0.0 - 10.0im]</code></pre><p>Then, this perturbation ocurring at <span>$t = 1.0$</span> seconds can be included as:</p><pre><code class="language-julia hljs">ns1 = NetworkSwitch(1.0, new_yb)</code></pre><h3 id="Example-2:-Three-Phase-Fault"><a class="docs-heading-anchor" href="#Example-2:-Three-Phase-Fault">Example 2: Three Phase Fault</a><a id="Example-2:-Three-Phase-Fault-1"></a><a class="docs-heading-anchor-permalink" href="#Example-2:-Three-Phase-Fault" title="Permalink"></a></h3><p>Another perturbation that can be modeled is a three phase fault at Bus 1 with impedance <code>r_f = 0.0001, x_f = 0.0</code> per unit, then the admittance of this new system is:</p><pre><code class="language-julia hljs">new_yb2 = [10000.0 - 20.0im  0.0 + 20.0im
           0.0 + 20.0im  0.0 - 20.0im]</code></pre><p>Then, this perturbation ocurring at <span>$t = 1.0$</span> seconds can be included as:</p><pre><code class="language-julia hljs">ns2 = NetworkSwitch(1.0, new_yb2)</code></pre><p>Now, consider that the fault is cleared at <span>$t = 1.05$</span> seconds by disconnecting the Circuit 2 of the line. This can be modeled with the single circuit admittance matrix:</p><pre><code class="language-julia hljs">new_yb3 = [0.0 - 10.0im 0.0 + 10.0im
           0.0 + 10.0im 0.0 - 10.0im]</code></pre><p>and the perturbation as:</p><pre><code class="language-julia hljs">ns3 = NetworkSwitch(1.05, new_yb3)</code></pre><p>Then, the entire perturbation for the Simulation can be included in a vector of perturbations as:</p><pre><code class="language-julia hljs">three_fault = [ns2, ns3]</code></pre><p>that can be passed as a perturbation argument in the Simulation construction.</p><h2 id="BranchTrip"><a class="docs-heading-anchor" href="#BranchTrip">BranchTrip</a><a id="BranchTrip-1"></a><a class="docs-heading-anchor-permalink" href="#BranchTrip" title="Permalink"></a></h2><p>A <code>BranchTrip</code> completely disconnects a branch from the system. Currently there is only support for static branches disconnection. Future releases will provide support for a Dynamic Line disconnection. The constructor is as follows:</p><pre><code class="language-julia hljs">mutable struct BranchTrip &lt;: Perturbation
    time::Float64
    branch_type::Type{&lt;:PowerSystems.ACBranch}
    branch_name::String
end</code></pre><p>The <code>time</code> defines when the Branch Trip will happen. The <code>branch_type</code> can be <code>Line</code> and <code>Transformer2W</code>. <code>DynamicLine</code> is currently not supported. The <code>branch_name</code> determines which branch will be disconnected.</p><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><p>Consider the following 2 bus system defined by:</p><pre><code class="language-julia hljs">buses = [
    Bus(1, &quot;nodeA&quot;, &quot;REF&quot;, 0, 1.0, (min = 0.9, max = 1.05), 230, nothing, nothing),
    Bus(2, &quot;nodeB&quot;, &quot;PV&quot;, 0, 1.0, (min = 0.9, max = 1.05), 230, nothing, nothing),
]

line1 = Line(
        &quot;Circuit1&quot;,
        true,
        0.0,
        0.0,
        Arc(from = buses[1], to = buses[2]),
        0.00,
        0.1,
        (from = 0.0, to = 0.0),
        2.0,
        (min = -0.7, max = 0.7),
    )
line2 = Line(
        &quot;Circuit2&quot;,
        true,
        0.0,
        0.0,
        Arc(from = buses[1], to = buses[2]),
        0.0,
        0.1,
        (from = 0.0, to = 0.0),
        2.0,
        (min = -0.7, max = 0.7),
    )

sys = System(100.0, buses, [], [], [line1, line2])</code></pre><p>A Branch Trip of Circuit 2 at time <span>$t = 1.0$</span> seconds, can be implemented as:</p><pre><code class="language-julia hljs">b_trip = BranchTrip(1.0, Line, &quot;Circuit2&quot;)</code></pre><p><strong>Note:</strong> Islanding is currently not supported in <code>PowerSimulationsDynamics.jl</code>. If a <code>BranchTrip</code> isolates a generation unit, the system may diverge due to the isolated generator.</p><h2 id="GeneratorTrip"><a class="docs-heading-anchor" href="#GeneratorTrip">GeneratorTrip</a><a id="GeneratorTrip-1"></a><a class="docs-heading-anchor-permalink" href="#GeneratorTrip" title="Permalink"></a></h2><p>A <code>GeneratorTrip</code> allows to disconnect a Dynamic Generation unit from the system at a specified time. The constructor is the following</p><pre><code class="language-julia hljs">mutable struct GeneratorTrip &lt;: Perturbation
    time::Float64
    device::PSY.DynamicInjection
end</code></pre><p>The <code>time</code> defines when the Generator Trip will happen. This time should be inside the time span considered in the Simulation. The <code>device</code> must be taken from the system to identify which device will be disconnected from the system.</p><h3 id="Example-2"><a class="docs-heading-anchor" href="#Example-2">Example</a><a class="docs-heading-anchor-permalink" href="#Example-2" title="Permalink"></a></h3><p>Consider that you have a generator at bus 102, named <code>&quot;generator-102-1&quot;</code> in your system called <code>sys</code>. The constructor to trip it from the system is:</p><pre><code class="language-julia hljs">g = get_component(DynamicGenerator, sys, &quot;generator-102-1&quot;)
g_trip = GeneratorTrip(1.0, g)</code></pre><h2 id="ControlReferenceChange"><a class="docs-heading-anchor" href="#ControlReferenceChange">ControlReferenceChange</a><a id="ControlReferenceChange-1"></a><a class="docs-heading-anchor-permalink" href="#ControlReferenceChange" title="Permalink"></a></h2><p>A <code>ControlReferenceChange</code> allows to change the reference setpoint provided by a generator/inverter. The constructor is the following:</p><pre><code class="language-julia hljs">mutable struct ControlReferenceChange &lt;: Perturbation
    time::Float64
    device::PSY.DynamicInjection
    signal::Symbol
    ref_value::Float64
end</code></pre><p>The <code>time</code> defines when the Control Reference Change will happen. This time should be inside the time span considered in the Simulation. The <code>device</code> must be taken from the system to identify which device will modify its setpoint. The <code>signal</code>, determines which reference setpoint will be modified. The accepted signals are:</p><ul><li><code>:P_ref</code>: Modifies the active power reference setpoint.</li><li><code>:V_ref</code>: Modifies the voltage magnitude reference setpoint.</li><li><code>:Q_ref</code>: Modifies the reactive power reference setpoint (if used).</li><li><code>:ω_ref</code>: Modifies the frequency setpoint.</li></ul><p>The <code>ref_value</code> updates the setpoint.</p><h3 id="Example-3"><a class="docs-heading-anchor" href="#Example-3">Example</a><a class="docs-heading-anchor-permalink" href="#Example-3" title="Permalink"></a></h3><p>Consider that you have a generator at bus 102, named <code>&quot;generator-102-1&quot;</code> in your system called <code>sys</code>. The constructor to change is active power reference to <code>0.5</code> is:</p><pre><code class="language-julia hljs">g = get_component(DynamicGenerator, sys, &quot;generator-102-1&quot;)
crc = ControlReferenceChange(1.0, g, :P_ref, 0.5)</code></pre><h2 id="LoadChange"><a class="docs-heading-anchor" href="#LoadChange">LoadChange</a><a id="LoadChange-1"></a><a class="docs-heading-anchor-permalink" href="#LoadChange" title="Permalink"></a></h2><p>A <code>LoadChange</code> allows to change the active or reactive power setpoint from a load. The constructor is the following:</p><pre><code class="language-julia hljs">mutable struct LoadChange &lt;: Perturbation
    time::Float64
    device::PSY.ElectricLoad
    signal::Symbol
    ref_value::Float64
end</code></pre><p>The <code>time</code> defines when the Load Change will happen. This time should be inside the time span considered in the Simulation. The <code>device</code> must be taken from the system to identify which load will modify its setpoint. The <code>signal</code> determines which reference setpoint will be modified. The accepted signals are:</p><ul><li><code>:P_ref</code>: Modifies the active power reference setpoint.</li><li><code>:Q_ref</code>: Modifies the reactive power reference setpoint. </li></ul><p>The <code>ref_value</code> updates the setpoint.</p><h3 id="Example-4"><a class="docs-heading-anchor" href="#Example-4">Example</a><a class="docs-heading-anchor-permalink" href="#Example-4" title="Permalink"></a></h3><p>Consider that you have a load at bus 103, named <code>&quot;load-103-1&quot;</code> in your system called <code>sys</code>. The constructor to change is active power reference to <code>0.8</code> per unit at <span>$t = 1.0$</span> seconds is:</p><pre><code class="language-julia hljs">l_device = get_component(ElectricLoad, sys, &quot;load-103-1&quot;)
l_change = LoadChange(1.0, l_device, :P_ref, 0.8)</code></pre><h2 id="LoadTrip"><a class="docs-heading-anchor" href="#LoadTrip">LoadTrip</a><a id="LoadTrip-1"></a><a class="docs-heading-anchor-permalink" href="#LoadTrip" title="Permalink"></a></h2><p>A <code>LoadTrip</code> allows the user to disconnect a load from the system. The constructor is the following:</p><pre><code class="language-julia hljs">mutable struct LoadTrip &lt;: Perturbation
    time::Float64
    device::PSY.ElectricLoad
end</code></pre><p>The <code>time</code> defines when the Load Change will happen. This time should be inside the time span considered in the Simulation. The <code>device</code> must be taken from the system to identify which load will be disconnected from the system.</p><h3 id="Example-5"><a class="docs-heading-anchor" href="#Example-5">Example</a><a class="docs-heading-anchor-permalink" href="#Example-5" title="Permalink"></a></h3><p>Consider that you have a load at bus 103, named <code>&quot;load-103-1&quot;</code> in your system called <code>sys</code>. The constructor to disconnect such load at <span>$t = 1.0$</span> seconds is:</p><pre><code class="language-julia hljs">l_device = get_component(ElectricLoad, sys, &quot;load-103-1&quot;)
l_trip = LoadTrip(1.0, l_device)</code></pre><h2 id="SourceBusVoltageChange"><a class="docs-heading-anchor" href="#SourceBusVoltageChange">SourceBusVoltageChange</a><a id="SourceBusVoltageChange-1"></a><a class="docs-heading-anchor-permalink" href="#SourceBusVoltageChange" title="Permalink"></a></h2><p>A <code>SourceBusVoltageChange</code> allows to change the reference setpoint provided by a voltage source. The constructor is the following:</p><pre><code class="language-julia hljs">mutable struct SourceBusVoltageChange &lt;: Perturbation
    time::Float64
    device::PSY.Source
    signal_index::Int
    ref_value::Float64
end</code></pre><p>The <code>time</code> defines when the Source Voltage Change will happen. This time should be inside the time span considered in the Simulation. The <code>device</code> must be taken from the system to identify which load will modify its setpoint. The <code>signal_index</code> determines which reference setpoint will be modified. The accepted signals are:</p><ul><li><code>1</code>: Modifies the internal voltage magnitude reference setpoint.</li><li><code>2</code>: Modifies the internal voltage angle reference setpoint.</li></ul><p>The <code>ref_value</code> updates the setpoint.</p><h3 id="Example-6"><a class="docs-heading-anchor" href="#Example-6">Example</a><a class="docs-heading-anchor-permalink" href="#Example-6" title="Permalink"></a></h3><p>Consider that you have a voltage source at bus 101, named <code>&quot;source-101-1&quot;</code> in your system called <code>sys</code>. The constructor to change is voltage magnitude reference to <code>1.02</code> per unit at <span>$t = 1.0$</span> seconds is:</p><pre><code class="language-julia hljs">s_device = get_component(Source, sys, &quot;source-101-1&quot;)
s_change = SourceBusVoltageChange(1.0, s_device, 1, 1.02)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reference_frames/">« Reference Frames</a><a class="docs-footer-nextpage" href="../generic/">Renewable Models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Thursday 28 October 2021 02:04">Thursday 28 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
